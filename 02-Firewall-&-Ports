Goal of this stage

Allow only required ports
Expose NGINX (80) to the internet
Keep Gunicorn (8000) private
Improve security

ğŸ”¹ Step 1 â€” Open GCP Firewall Rules

Go to Google Cloud Console

Select your Project

Navigate to:

VPC Network â†’ Firewall


Click CREATE FIREWALL RULE

ğŸ”¹ Step 2 â€” Create rule to allow HTTP (Port 80)
Basic details

Name: allow-http-nginx

Network: default (or your VPC)

Priority: 1000

Direction: Ingress

Action: Allow

Targets

Target tags: nginx-server
(You must add this tag to your VM)

Source

Source IPv4 ranges:

0.0.0.0/0

Protocols and ports

Check TCP

Ports:

80


ğŸ‘‰ Click CREATE

ğŸ”¹ Step 3 â€” Create rule to allow SSH (Port 22)

Create another firewall rule.

Name: allow-ssh

Direction: Ingress

Action: Allow

Source IP ranges:

0.0.0.0/0


Protocols and ports:

tcp:22


Click CREATE

ğŸ”¹ Step 4 â€” DO NOT create rule for port 8000 âŒ

ğŸš« Important

Do NOT add:

tcp:8000


Reason:

Gunicorn is internal

NGINX talks to it via localhost

Exposing 8000 is a security risk

ğŸ”¹ Step 5 â€” Add network tag to VM

Go to:

Compute Engine â†’ VM instances


Click your VM

Click EDIT

Under Network tags, add:

nginx-server


Click SAVE

ğŸ”¹ Step 6 â€” Verify from browser

âœ… Works:

http://<VM-PUBLIC-IP>


âŒ Should NOT work:

http://<VM-PUBLIC-IP>:8000
